# Agent Data Contract - Standard formats for inter-agent communication
# Based on Claude Code Agent Interaction Architecture

# Research Agent Output
research_output:
  version: "1.0"
  metadata:
    agent: "research"
    command: "/research [topic]"
    timestamp: "ISO-8601"
    execution_time: "duration in ms"
    
  data:
    topic: "string"
    summary: "string"
    
    findings:
      - content: "string"
        source: "url"
        credibility: "0.0-1.0"
        timestamp: "ISO-8601"
        
    facts:
      - statement: "string"
        sources: ["urls"]
        confidence: "0.0-1.0"
        validation: "cross-referenced|single-source|unverified"
        
    insights:
      - description: "string"
        type: "pattern|trend|anomaly|connection"
        strength: "0.0-1.0"
        
    gaps:
      - area: "string"
        importance: "high|medium|low"
        suggested_action: "string"
        
  quality:
    overall_confidence: "0.0-1.0"
    source_diversity: "integer"
    fact_validation_rate: "0.0-1.0"
    bias_assessment: "low|medium|high"
    
  next_actions:
    - command: "/kb-add"
      priority: "high|medium|low"
      reason: "string"

# Knowledge Base Entry
kb_entry:
  version: "1.0"
  metadata:
    id: "kb_YYYY_NNN"
    created: "ISO-8601"
    modified: "ISO-8601"
    version: "semantic version"
    agent: "knowledge-base"
    
  content:
    topic: "string"
    body: "markdown text"
    
    categories: ["strings"]
    tags: ["strings"]
    
    relationships:
      - target: "kb_id or topic"
        type: "related|prerequisite|derived|contradicts"
        strength: "0.0-1.0"
        
  quality:
    score: "0.0-1.0"
    completeness: "0.0-1.0"
    accuracy: "0.0-1.0"
    currency: "0.0-1.0"
    
  sources:
    - title: "string"
      url: "string"
      credibility: "0.0-1.0"
      accessed: "ISO-8601"
      
  validation:
    status: "validated|pending|failed"
    last_checked: "ISO-8601"
    issues: ["strings"]

# Knowledge Graph Structure
graph_structure:
  version: "1.0"
  metadata:
    id: "graph_id"
    domain: "string"
    created: "ISO-8601"
    agent: "knowledge-graph"
    
  nodes:
    - id: "node_id"
      label: "string"
      type: "concept|entity|relationship"
      properties:
        importance: "0.0-1.0"
        centrality: "0.0-1.0"
        cluster: "cluster_id"
        
  edges:
    - source: "node_id"
      target: "node_id"
      type: "string"
      weight: "0.0-1.0"
      bidirectional: "boolean"
      
  clusters:
    - id: "cluster_id"
      name: "string"
      nodes: ["node_ids"]
      cohesion: "0.0-1.0"
      
  metrics:
    nodes: "integer"
    edges: "integer"
    density: "0.0-1.0"
    clustering_coefficient: "0.0-1.0"
    
  paths:
    - from: "node_id"
      to: "node_id"
      path: ["node_ids"]
      strength: "0.0-1.0"

# Validation Report
validation_report:
  version: "1.0"
  metadata:
    entry_id: "kb_id"
    validated_at: "ISO-8601"
    agent: "knowledge-curator"
    
  scores:
    overall: "0.0-1.0"
    accuracy: "0.0-1.0"
    completeness: "0.0-1.0"
    relevance: "0.0-1.0"
    clarity: "0.0-1.0"
    currency: "0.0-1.0"
    
  validation:
    facts_checked: "integer"
    facts_verified: "integer"
    sources_validated: "integer"
    cross_references: "integer"
    
  issues:
    - type: "accuracy|completeness|currency|formatting"
      severity: "high|medium|low"
      description: "string"
      suggestion: "string"
      
  enrichment:
    suggested: "boolean"
    areas:
      - type: "context|sources|examples|relationships"
        description: "string"
        priority: "high|medium|low"
        
  actions:
    taken:
      - action: "string"
        result: "success|failed"
    recommended:
      - action: "string"
        reason: "string"

# Synthesis Output
synthesis_output:
  version: "1.0"
  metadata:
    id: "synthesis_id"
    created: "ISO-8601"
    agent: "synthesis"
    sources: ["agent_outputs"]
    
  synthesis:
    summary: "string"
    
    key_points:
      - point: "string"
        confidence: "0.0-1.0"
        sources: ["agent_ids"]
        
    patterns:
      - pattern: "string"
        type: "convergence|divergence|trend|anomaly"
        strength: "0.0-1.0"
        
    contradictions:
      - item1: "string"
        item2: "string"
        resolution: "string"
        
    insights:
      - insight: "string"
        novelty: "0.0-1.0"
        importance: "high|medium|low"
        
  recommendations:
    - action: "string"
      rationale: "string"
      priority: "high|medium|low"
      
  quality:
    confidence: "0.0-1.0"
    coverage: "0.0-1.0"
    coherence: "0.0-1.0"

# Command Response
command_response:
  version: "1.0"
  metadata:
    command: "string"
    args: ["strings"]
    timestamp: "ISO-8601"
    duration_ms: "integer"
    
  status:
    code: "success|partial|failed"
    message: "string"
    
  data: "agent-specific output"
  
  errors:
    - code: "string"
      message: "string"
      details: "object"
      
  warnings:
    - message: "string"
      severity: "high|medium|low"
      
  next_commands:
    - command: "string"
      reason: "string"
      optional: "boolean"

# Workflow State
workflow_state:
  version: "1.0"
  metadata:
    workflow_id: "string"
    name: "string"
    started: "ISO-8601"
    updated: "ISO-8601"
    
  steps:
    - step_id: "string"
      agent: "string"
      command: "string"
      status: "pending|running|completed|failed"
      started: "ISO-8601"
      completed: "ISO-8601"
      output_location: "file_path"
      
  data_flow:
    - from_step: "step_id"
      to_step: "step_id"
      data_type: "string"
      location: "file_path"
      
  current_step: "step_id"
  
  metrics:
    total_duration_ms: "integer"
    data_transferred_bytes: "integer"
    agents_invoked: "integer"
    
  status:
    overall: "running|completed|failed|partial"
    message: "string"
    errors: ["strings"]